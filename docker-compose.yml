version: '3'

services:
  api:
    container_name: api
    image: variablecarp571/tunl_assessment_api
    build: .
    command: "yarn dev"
    ports:
      - "3001:3001"
    depends_on:
      - mongo
    networks:  
      - app-network
  proxy:
    image: nginx:alpine
    container_name: web-proxy
    restart: unless-stopped
    volumes:
      - ./proxy.conf:/etc/nginx.conf/default.conf
    ports:
      - 80:80
    depends_on:
      - api
    networks:
      - app-network
  mongo:
    container_name: mongo
    image: "mongo"
    ports:
      - "27017:27017"

networks:
  app-network:
    driver: bridge